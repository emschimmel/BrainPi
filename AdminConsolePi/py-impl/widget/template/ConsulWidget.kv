<SelectableButton>:
    # Draw a background to indicate selection
    canvas.before:
        Color:
            rgba: (.0, 0.9, .1, .3) if self.selected else (0, 0, 0, 0.6)
        Rectangle:
            pos: self.pos
            size: self.size

<MyRV@RecycleView>:
    viewclass: 'SelectableButton'
    SelectableRecycleBoxLayout:
        cols: 1
        default_size: None, dp(26)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'

        multiselect: True
        touch_multiselect: True


<ConsulWidget>:
    canvas.before:
        Color:
            rgba: 1, 1, 1, 0.8
        Line:
            rectangle: self.x+0.015*self.width, self.y+0.02*self.height, 0.97*self.width, 0.96*self.height
        Color:
            rgba: 1, 1, 1, 0.3
        Rectangle:
            size: 0.976*self.width, 0.96*self.height
            pos: self.x+0.012*self.width, self.y+0.022*self.height

    orientation: 'vertical'
    GridLayout:
        cols: 3
        rows: 1
        size_hint_y: None
        height: dp(30)
        padding: dp(8)
        spacing: dp(16)
        Button:
            text: 'All services'
            on_press: root.test_subset('all')
        Button:
            text: 'Failing services'
            on_press: root.test_subset('failing')
        Button:
            text: 'Success services'
            on_press: root.test_subset('succes')
    GridLayout:
        cols: 4
        rows: 1
        size_hint_y: None
        height: dp(30)
        padding: dp(1)
        spacing: dp(16)
        Label:
            size_hint_x: .4
            text: "name"
        Label:
            size_hint_x: .1
            text: "passing"
        Label:
            size_hint_x: .1
            text: "warning"
        Label:
            size_hint_x: .1
            text: "critical"
    BoxLayout:
        MyRV:
            size_hint_x: .4
            data: [{'text': str(x['name'])} for x in root.rv_data]
            rgba: (str(x['color']) for x in root.rv_data)
        MyRV:
            size_hint_x: .1
            data: [{'text': str(x['ChecksPassing'])} for x in root.rv_data]
        MyRV:
            size_hint_x: .1
            data: [{'text': str(x['ChecksWarning'])} for x in root.rv_data]
        MyRV:
            size_hint_x: .1
            data: [{'text': str(x['ChecksCritical'])} for x in root.rv_data]
